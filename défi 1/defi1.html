<html>

<head>
    <title></title>
    <meta charset="utf-8" />
    <script src="conversion.js"></script>
    <style>
        .lol {
            border-bottom: none;
        }
        table {
            border-collapse: collapse;
        }
        td {
            width: 250px;
            border-bottom: 1px;
            border-bottom-style: solid;
        }
    </style>
</head>

<body>
    <h3>Décimal vers Hexadécimal</h3>
    Décimal : <input type="text" value="4919" id="decimal1"><br>
    Hexadécimal : <span type="text" id="hexadecimal1"></span><br>
    <button id="convertdecToHex">Convertir</button>
    <script>
        document.getElementById('convertdecToHex').addEventListener('click', event => {
            deci1 = document.getElementById('decimal1').value;
            hexa1 = decToHex(deci1);
            document.getElementById('hexadecimal1').innerHTML = '0x' + hexa1;
        })
    </script>

    <h3>Hexadécimal vers Décimal</h3>
    Hexadécimal : <input type="text" value="18AED" id="hexadecimal2"><br>
    Décimal : <span type="text" id="decimal2"></span><br>
    <button id="convertHexToDec">Convertir</button>
    <script>
        document.getElementById('convertHexToDec').addEventListener('click', event => {
            hexa2 = document.getElementById('hexadecimal2').value;
            deci2 = hexToDec(hexa2);
            document.getElementById('decimal2').innerHTML = deci2;
        })
    </script>

    <h3>Little Endian vers Hexadécimal et Décimal</h3>
    Hexa Little Endian : <input type="text" value="000001FF" id="hle"><br>
    Hexadecimal : <span type="text" id="hexadecimal"></span><br>
    Decimal : <span type="text" id="decimal"></span><br>
    <button id="convertHexaLE">Convertir</button>
    <script>
        document.getElementById('convertHexaLE').addEventListener('click', event => {
            hle = document.getElementById('hle').value
            hexa = reverseBytesOrder(hle);
            document.getElementById('hexadecimal').innerHTML = '0x' + hexa
            document.getElementById('decimal').innerHTML = parseInt(hexa, 16)
        })
    </script>

    <h3>Conversion VarInt</h3>
    VarInt : <input type="text" value="FE703A0F00" id="varint"><br>
    Nombre d'octets : <span type="text" id="decimal3"></span><br>
    <button id="convertVarInt">Convertir</button>
    <script>
        document.getElementById('convertVarInt').addEventListener('click', event => {
            varint1 = document.getElementById('varint').value
            deci3 = varInt(varint1);
            document.getElementById('decimal3').innerHTML = deci3;
        })
    </script>

    <h3>Infos obtenus à partir du champs BITS</h3>
    BITS : <input type="text" value="15A35C" id="bits"><br>
    Cible : <span type="text" id="cible"></span><br>
    Difficulté : <span type="text" id="difficulte"></span><br>
    <button id="convertBits">Convertir</button>
    <script>
        document.getElementById('convertBits').addEventListener('click', event => {
            bits1 = document.getElementById('bits').value
            cible1 = bitsToTarget(bits1);
            difficulte1 = targetToDifficulty(cible1);
            document.getElementById('cible').innerHTML = cible1;
            document.getElementById('difficulte').innerHTML = difficulte1;
        })
    </script>

    <h3>Informations contenues dans un bloc</h3>
    BLOC (format JSON) : <input type="text"
        value='{"ver":1,"next_block":["000000000002b51a6a06258bd17d92e09acf7ba72cf1dcfda15ce75efa0a30ca"],"time":1291256434,"bits":453516498,"fee":0,"nonce":-905313530,"n_tx":2,"size":474,"block_index":109850,"main_chain":true,"height":95000,"weight":1652,"tx":[{"hash":"82623ec828f8db0a311202fc65789c93212d641b9986f6a2ea213d4564eb1e0f","ver":1,"vin_sz":1,"vout_sz":1,"size":134,"weight":536,"fee":0,"relayed_by":"0.0.0.0","lock_time":0,"tx_index":224889,"double_spend":false,"result":null,"balance":null,"time":1291256434,"block_index":109850,"block_height":95000,"inputs":[{"sequence":4294967295,"witness":"","script":"04d21c081b0132","index":0}],"out":[{"type":0,"spent":true,"value":5000000000,"spending_outpoints":[{"tx_index":225169,"n":9}],"tx_index":224889,"script":"41042f6363f388f0209c8ee042311887f0eaa434eb00b6d80695ca419efe075861e7a4501b6e92dd640ebf44f8ddb1ba41bad6b4663dd0bc559c94db9dcbe8a72741ac","addr":"1EXfnbMyJY2YpdPJ4zyCBihgemXzkUt7mK","n":0}]},{"hash":"3500b0e3452e801e648a0aff1a5a7bd6f2c3f9ce26fd4b1920a391e18d1f9d53","ver":1,"vin_sz":1,"vout_sz":2,"size":259,"weight":1036,"fee":0,"relayed_by":"0.0.0.0","lock_time":0,"tx_index":224888,"double_spend":false,"result":null,"balance":null,"time":1291256434,"block_index":109850,"block_height":95000,"inputs":[{"prev":{"type":0,"spent":true,"value":3879000000,"spending_outpoints":[{"tx_index":224888,"n":0}],"tx_index":224872,"script":"76a914d5041b24e832c57f0eb740933f60f3272ab700bb88ac","addr":"1LRKr9pFgdf21rjaggqAdNcW5fspmqpzvc","n":0},"sequence":4294967295,"witness":"","script":"493046022100b14862b44b36923c3ae37b5a1213d393bbb3aa1628f0cdc05445a79bf30e4c3b0221009ba1dd9c3c6b54db8a662062f03a663e1ce9fdb67e8b8c64198f3aa0c3c1c432014104b672897640cfd6e1224deb01b5d5c93642f6d68162257ed8368912110076a21d6652a7a06ca9d83fe438201b0a8005051b7ff6895e57e6eeec2e76fe338960e9","index":0,"prev_out":{"type":0,"spent":true,"value":3879000000,"spending_outpoints":[{"tx_index":224888,"n":0}],"tx_index":224872,"script":"76a914d5041b24e832c57f0eb740933f60f3272ab700bb88ac","addr":"1LRKr9pFgdf21rjaggqAdNcW5fspmqpzvc","n":0}}],"out":[{"type":0,"spent":true,"value":5000000,"spending_outpoints":[{"tx_index":23278921,"n":7}],"tx_index":224888,"script":"76a914d480fa1c53784740a78625ef63dccd7826fdc2e488ac","addr":"1LNcm9WfCBmtdXMERVN2XL76DccvsmNxos","n":0},{"type":0,"spent":true,"value":3874000000,"spending_outpoints":[{"tx_index":224907,"n":0}],"tx_index":224888,"script":"76a914e184b0463811a9af802debfcfa73665250a8cf2588ac","addr":"1MZRzXUVt9Fqj9fZrJMVRiswWmyKXqdTmz","n":1}]}],"hash":"0000000000074a6f7e2d07cd8e5dd6dc8183993ee3b84666af499bc5b439d21b","prev_block":"0000000000062417f6d6977bea49e6143afd3e0cff9bf3ba20c227ef89370e50","mrkl_root":"94ae48799a9d24c0cdb32e96c6dd9805bdfa3a93ed99872f93cba720583f9fbb"}'
        id="json"><br><br>
    <table class="table table-striped">
        <tr>
            <th colspan="2">
                <h2>BLOC #<span type="text" id="blockHeight"></span></h2>
            </th>
        </tr>
        <tr>
            <td><b>Informations</b></td>
            <td></td>
        </tr>
        <tr>
            <td>Nombre de transactions</td>
            <td><span type="text" id="nbTx"></span></td>
        </tr>
        <tr>
            <td>Date (timestamp)</td>
            <td><span type="text" id="time"></span></td>
        </tr>
        <tr>
            <td>Frais des transactions</td>
            <td><span type="text" id="txFees"></span></td>
        </tr>
        <tr>
            <td>Hauteur du bloc</td>
            <td><span type="text" id="blockHeight2"></span></td>
        </tr>
        <tr>
            <td>Taille</td>
            <td><span type="text" id="size"></span> octets</td>
        </tr>
        <tr>
            <td>Difficulté</td>
            <td><span type="text" id="difficulty"></span></td>
        </tr>
        <tr>
            <td>Version</td>
            <td><span type="text" id="version"></span></td>
        </tr>
        <tr>
            <td class="lol"><br></td>
        </tr>
        <tr>
            <td><b>Hashes</b></td>
            <td></td>
        </tr>
        <tr>
            <td>Hash</td>
            <td><span type="text" id="hash"></span></td>
        </tr>
        <tr>
            <td>Bloc précédent</td>
            <td><span type="text" id="previous_block"></span></td>
        </tr>
        <tr>
            <td>Bloc suivant</td>
            <td><span type="text" id="next_block"></span></td>
        </tr>
        <tr>
            <td>Racine de Merkle</td>
            <td><span type="text" id="merkleRoot"></span></td>
        </tr>


        <script>
            let jsonString = document.getElementById('json').value;
            let jsonBlock = JSON.parse(jsonString);

            document.getElementById('time').innerHTML = jsonBlock.time;
            document.getElementById('nbTx').innerHTML = jsonBlock.n_tx;
            document.getElementById('txFees').innerHTML = jsonBlock.fee;
            document.getElementById('blockHeight').innerHTML = jsonBlock.height;
            document.getElementById('blockHeight2').innerHTML = jsonBlock.height;
            document.getElementById('size').innerHTML = jsonBlock.size;
            document.getElementById('difficulty').innerHTML = targetInDecToDifficulty(jsonBlock.bits);
            document.getElementById('version').innerHTML = jsonBlock.ver;
            document.getElementById('hash').innerHTML = jsonBlock.hash;
            document.getElementById('previous_block').innerHTML = jsonBlock.prev_block;
            document.getElementById('next_block').innerHTML = jsonBlock.next_block;
            document.getElementById('merkleRoot').innerHTML = jsonBlock.mrkl_root;
        </script>


</body>

</html>